# Test staged pump rate changes in FLOW block
template: 'column.in'
database: 'SukindaCr53.dbs'
aqueous_database: 'aqueous.dbs'
catabolic_pathways: 'CatabolicPathways.in'
restart_file: ''

timeout: 3600
conditions: ['upper_laterite', 'pump', 'lower_laterite']

# Fewer files for faster testing
number_of_files: 5
nodes: 5

# Staged restart configuration
restart_chain:
    stages: 2
    # Spatial profile times for each stage (in output time_units)
    # Stage 1 times are offset by the last value of stage 0 (2.5)
    # So stage 1 outputs at: 2.5+0.5=3.0, 2.5+1.0=3.5, 2.5+2.0=4.5, 2.5+2.5=5.0
    spatial_profile:
        - [0.5, 1.0, 1.5, 2.0, 2.5]
        - [0.5, 1.0, 2.0, 2.5]

# Vary mineral rate across parallel runs (linspace)
mineral_rates:
    Mn_Goethite_DB&DIRB:
        - 'linspace'
        - [-13.2, -11.7, 1]

# Staged pump rate in FLOW block with nested list
# Stage 0: normal pump rate for all runs (1.1574e-8 m/s)
# Stage 1: different pump rate per run [1e-8, 2e-8, 3e-8, 4e-8, 5e-8]
# Key format: pump&<x>&<y>&<z> matching the cell location in template
flow:
    pump&20&1&1:
        - 'staged'
        - [1.1574e-8, [1.0e-8, 2.0e-8, 3.0e-8, 4.0e-8, 5.0e-8]]

# Example of nested list for concentrations
# Stage 0: Ca++ = 0.5 for all runs
# Stage 1: Ca++ varies per run [1.0, 1.5, 2.0, 2.5, 3.0]
concentrations:
    upper_laterite:
        Ca++:
            - 'staged'
            - [0.5, [1.0, 1.5, 2.0, 2.5, 3.0]]

# Example of changing boundary condition assignment between stages
# Stage 0: x_begin uses 'upper_laterite' condition
# Stage 1: x_begin uses 'rainwater' condition
boundary_conditions:
    x_begin:
        - 'staged'
        - ['upper_laterite', 'lower_laterite']
